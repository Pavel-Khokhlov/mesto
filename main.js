!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);var r=document.querySelector(".profile__edit-btn"),o=document.querySelector(".profile__name"),i=document.querySelector(".profile__job"),u=document.querySelector(".popup__input_name-profile"),a=document.querySelector(".popup__input_job-profile"),c=document.querySelector(".profile__avatar-btn"),s=document.querySelector(".profile__avatar"),l=document.querySelector(".popup__input_avatar-link"),f=document.querySelector(".profile__add-btn"),p=document.querySelector(".popup__input_name-place"),h=document.querySelector(".popup__input_link-place"),_=document.querySelector(".popup__input");document.querySelector(".popup-zoom"),document.querySelector(".popup_edit-profile"),document.querySelector(".popup_edit-avatar");function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n,r,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._cardId=t._id,this._userId=o.id,this._ownerId=t.owner._id,this._selector=n,this._handleCardClick=r,this._handleLikeClick=i,this._handleDelClick=u}var t,n,r;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".place").cloneNode(!0)}},{key:"_handleLiked",value:function(){this._handleLikeClick(this)}},{key:"toggleLike",value:function(e){this._likeButton.classList.toggle("place__like-btn_active"),this._likeCount.textContent=e.likes.length,this._likes=e.likes}},{key:"isLiked",value:function(){return!!this._likes.find((function(e){return e._id===o.id}))}},{key:"_handleZoomImage",value:function(e,t){this._handleCardClick(e,t)}},{key:"_handleDelete",value:function(e,t){this._handleDelClick(e,t)}},{key:"_setEventsListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){return e._handleLiked()})),this._delButton.addEventListener("click",(function(){return e._handleDelete(e._element,e._cardId)})),this._image.addEventListener("click",(function(){return e._handleZoomImage(e._name,e._link)}))}},{key:"generatePlace",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".place__like-btn"),this._delButton=this._element.querySelector(".place__del-btn"),this._image=this._element.querySelector(".place__image"),this._image.src=this._link,this._image.alt=this._name,this._element.querySelector(".place__title").textContent=this._name,this._likeCount=this._element.querySelector(".place__like-count"),this._likeCount.textContent=this._likes.length,this._ownerId===this._userId?this._delButton.classList.remove("place__del-btn_disable"):this._delButton.classList.add("place__del-btn_disable"),this.isLiked()?this._likeButton.classList.add("place__like-btn_active"):this._likeButton.classList.remove("place__like-btn_active"),this._setEventsListeners(),this._element}}])&&d(t.prototype,n),r&&d(t,r),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n,r;return t=e,(n=[{key:"renderPlaces",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"newItem",value:function(e){this._container.prepend(e)}}])&&v(t.prototype,n),r&&v(t,r),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t){var n=t.nameUser,r=t.aboutUser;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._about=r,this._avatar=s}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar,this._avatar.alt=e.name}}])&&b(t.prototype,n),r&&b(t,r),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._root=document.querySelector(".root"),this._popupForm=document.querySelector(t),this._popup=this._popupForm.closest(".popup"),this._submitBtn=this._popupForm.querySelector(".popup__save-btn"),this.close=this.close.bind(this),this._overlayElement=null,this.handleEscClose=this.handleEscClose.bind(this)}var t,n,r;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),this._root.classList.add("root_scroll-disabled"),document.addEventListener("keydown",this.handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),this._root.classList.remove("root_scroll-disabled"),document.removeEventListener("keydown",this.handleEscClose)}},{key:"handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOverlayClose",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){this._popup.querySelector(".popup__close-btn").addEventListener("click",this.close),this._overlayElement=this._popup,this._overlayElement.addEventListener("click",this._handleOverlayClose.bind(this))}}])&&g(t.prototype,n),r&&g(t,r),e}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(i,e);var t,n,r,o=P(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._zoomPopupElement=document.querySelector(e),t._zoomImage=t._zoomPopupElement.querySelector(".popup-zoom__image"),t._zoomCapture=t._zoomPopupElement.querySelector(".popup-zoom__caption"),t}return t=i,(n=[{key:"open",value:function(e,t){this._zoomImage.src=t,this._zoomImage.alt=e,this._zoomCapture.textContent=e,O(j(i.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){O(j(i.prototype),"setEventListeners",this).call(this)}}])&&w(t.prototype,n),r&&w(t,r),i}(S);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,n,r,o=R(i);function i(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,n))._handleFormSubmit=r,t._inputList=t._popupForm.querySelectorAll(".popup__input"),t._nameInput=u,t._jobInput=a,t}return t=i,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){var t=e.name,n=e.about;this._nameInput.value=t,this._jobInput.value=n}},{key:"changeBtnText",value:function(){this._submitBtn.textContent="Сохранение..."}},{key:"close",value:function(){x(U(i.prototype),"close",this).call(this),this._popupForm.reset(),this._submitBtn.textContent="Сохранить"}},{key:"setEventListeners",value:function(){var e=this;x(U(i.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(){e._handleFormSubmit(e._getInputValues())}))}}])&&q(t.prototype,n),r&&q(t,r),i}(S);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,o=H(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(n=[{key:"changeConfirmHandler",value:function(e){this._handleSubmitYes=e}},{key:"changeBtnText",value:function(){this._submitBtn.textContent="Удаление..."}},{key:"close",value:function(){F(J(i.prototype),"close",this).call(this),this._submitBtn.textContent="Да"}},{key:"setEventListeners",value:function(){var e=this;F(J(i.prototype),"setEventListeners",this).call(this),this._submitBtn.addEventListener("click",(function(){return e._handleSubmitYes(e._cardId)}))}}])&&V(t.prototype,n),r&&V(t,r),i}(S);function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t,this._formElement=document.querySelector(t),this._inputElement=_,this._inputSelector=".popup__input",this._submitButton=".popup__save-btn",this._activeErrorClass="popup__input-error_active",this._inputInvalidClass="popup__input_invalid",this._inactiveButtonClass="popup__save-btn_inactive",this._inputArray=this._formElement.querySelectorAll(this._inputSelector),this._submitBtn=this._formElement.querySelector(this._submitButton)}var t,n,r;return t=e,(n=[{key:"resetErrorState",value:function(){var e=this;this._inputArray.forEach((function(t){e._hideInputError(t),e._inactiveButton()}))}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(this._activeErrorClass),e.classList.add(this._inputInvalidClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._activeErrorClass),e.classList.remove(this._inputInvalidClass)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_inactiveButton",value:function(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.setAttribute("disabled",!0)}},{key:"_activeButton",value:function(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(e){this._hasInvalidInput(e)?this._inactiveButton():this._activeButton()}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=e.validationMessage;this._showInputError(e,t)}}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector));t.forEach((function(n){n.addEventListener("input",(function(){e._checkInputValidity(n),e._toggleButtonState(t)}))})),this._toggleButtonState(t)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&Z(t.prototype,n),r&&Z(t,r),e}();function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.headers=t.headers}var t,n,r;return t=e,(n=[{key:"getPlaces",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then(this._checkPromise)}},{key:"newPlace",value:function(){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:p.value,link:h.value})}).then(this._checkPromise)}},{key:"getUserInfo",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers}).then(this._checkPromise)}},{key:"patchUserInfo",value:function(){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:u.value,about:a.value})}).then(this._checkPromise)}},{key:"patchUserAvatar",value:function(){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:l.value})}).then(this._checkPromise)}},{key:"addLike",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then(this._checkPromise)}},{key:"removeLike",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then(this._checkPromise)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(this._checkPromise)}},{key:"_checkPromise",value:function(e){return e.ok||Promise.reject("Error ".concat(e.status)),e.json()}}])&&G(t.prototype,n),r&&G(t,r),e}();function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){alert("Всё идёт не по плану. ".concat(e.status))},ee=new I(".popup-zoom");ee.setEventListeners();var te=function(e,t){ee.open(e,t)},ne=new $(".popup_edit-profile");ne.enableValidation();var re=new $(".popup_edit-avatar");re.enableValidation();var oe=new $(".popup_add-place");oe.enableValidation();var ie=new K({url:"https://mesto.nomoreparties.co/v1/cohort-18",headers:{"Content-Type":"application/json",authorization:"87b27e82-ce10-439c-bbe6-2acce8f72cdc"}}),ue=function(e){var t=e._cardId;e.isLiked()?ie.removeLike(t).then((function(t){e.toggleLike(t)})).catch(X):ie.addLike(t).then((function(t){e.toggleLike(t)})).catch(X)};Promise.all([ie.getUserInfo(),ie.getPlaces()]).then((function(e){var t=Q(e,2),n=t[0],r=t[1];fe.setUserInfo(n),fe.setUserAvatar(n),o.id=n._id;var i=r.map((function(e){return{name:e.name,link:e.link,owner:e.owner,_id:e._id,likes:e.likes}}));ae.renderPlaces(i)})).catch(X);var ae=new m({renderer:function(e){!function(e){var t=new y(e,".place-template",te,ue,le).generatePlace();ae.addItem(t)}(e)}},".places"),ce=new D({popupSelector:".popup_add-place",handleFormSubmit:function(){ce.changeBtnText(),ie.newPlace().then((function(e){var t=new y(e,".place-template",te,ue,le).generatePlace();ae.newItem(t)})).then((function(){ce.close()})).catch(X)}});ce.setEventListeners(),f.addEventListener("click",(function(){oe.resetErrorState(),ce.open()}));var se=new Y(".popup_del-place");se.setEventListeners();var le=function(e,t){var n=e,r=t;se.open(),se.changeConfirmHandler((function(){se.changeBtnText(),ie.deleteCard(r).then((function(e){return e})).then((function(){n.remove()})).then((function(){se.close()})).catch(X)}))},fe=new k({nameUser:o,aboutUser:i}),pe=new D({popupSelector:".popup_edit-profile",handleFormSubmit:function(){pe.changeBtnText(),ie.patchUserInfo().then((function(e){fe.setUserInfo(e)})).then((function(){pe.close()})).catch(X)}});pe.setEventListeners(),r.addEventListener("click",(function(){ne.resetErrorState(),pe.setInputValues(fe.getUserInfo()),pe.open()}));var he=new D({popupSelector:".popup_edit-avatar",handleFormSubmit:function(){he.changeBtnText(),ie.patchUserAvatar().then((function(e){fe.setUserAvatar(e)})).then((function(){he.close()})).catch(X)}});he.setEventListeners(),c.addEventListener("click",(function(){re.resetErrorState(),he.open()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wb3B1cFdpdGhDb25maXJtLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImJ1dHRvbkVkaXRQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmFtZVByb2ZpbGUiLCJqb2JQcm9maWxlIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJidXR0b25BdmF0YXIiLCJ1c2VyQXZhdGFyIiwiYXZhdGFyTGlua0lucHV0IiwiYnV0dG9uQWRkUGxhY2UiLCJpbnB1dE5hbWVQbGFjZSIsImlucHV0TGlua1BsYWNlIiwiaW5wdXRFbGVtZW50IiwiQ2FyZCIsImNhcmQiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbENsaWNrIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZElkIiwiX2lkIiwiX3VzZXJJZCIsImlkIiwiX293bmVySWQiLCJvd25lciIsIl9zZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbENsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsInJlcyIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2xpa2VDb3VudCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiZmluZCIsImVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VkIiwiX2RlbEJ1dHRvbiIsIl9oYW5kbGVEZWxldGUiLCJfZWxlbWVudCIsIl9pbWFnZSIsIl9oYW5kbGVab29tSW1hZ2UiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJhbHQiLCJyZW1vdmUiLCJhZGQiLCJpc0xpa2VkIiwiX3NldEV2ZW50c0xpc3RlbmVycyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNhcmRzQXJyIiwiZm9yRWFjaCIsImFwcGVuZCIsInByZXBlbmQiLCJVc2VySW5mbyIsIm5hbWVVc2VyIiwiYWJvdXRVc2VyIiwiX2Fib3V0IiwiX2F2YXRhciIsImFib3V0IiwiYXZhdGFyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3Jvb3QiLCJfcG9wdXBGb3JtIiwiX3BvcHVwIiwiY2xvc2VzdCIsIl9zdWJtaXRCdG4iLCJjbG9zZSIsIl9vdmVybGF5RWxlbWVudCIsImhhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX3pvb21Qb3B1cEVsZW1lbnQiLCJfem9vbUltYWdlIiwiX3pvb21DYXB0dXJlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX25hbWVJbnB1dCIsIl9qb2JJbnB1dCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwV2l0aENvbmZpcm0iLCJoYW5kbGVyIiwiX2hhbmRsZVN1Ym1pdFllcyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtU2VsZWN0b3IiLCJfZm9ybVNlbGVjdG9yIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0RWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsIl9hY3RpdmVFcnJvckNsYXNzIiwiX2lucHV0SW52YWxpZENsYXNzIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRBcnJheSIsIl9oaWRlSW5wdXRFcnJvciIsIl9pbmFjdGl2ZUJ1dHRvbiIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9hY3RpdmVCdXR0b24iLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zaG93SW5wdXRFcnJvciIsIkFycmF5IiwiZnJvbSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFwaSIsImNvbmZpZyIsInVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tQcm9taXNlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJvayIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJqc29uIiwiY2F0Y2hFcnIiLCJhbGVydCIsInpvb21Qb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwib3Blblpvb21Qb3B1cCIsIm9wZW4iLCJmb3JtUHJvZmlsZVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtQXZhdGFyVmFsaWRhdG9yIiwiZm9ybVBsYWNlVmFsaWRhdG9yIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsInJlbW92ZUxpa2UiLCJ0b2dnbGVMaWtlIiwiYWRkTGlrZSIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0UGxhY2VzIiwidXNlclJlcyIsImNhcmRSZXMiLCJ1c2VyUHJvZmlsZSIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsIm1hcCIsInNlcnZlclBsYWNlTGlzdCIsInJlbmRlclBsYWNlcyIsInBsYWNlRWxlbWVudCIsImdlbmVyYXRlUGxhY2UiLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsIm5ld1BsYWNlRm9ybSIsImNoYW5nZUJ0blRleHQiLCJuZXdQbGFjZSIsIm5ld0l0ZW0iLCJyZXNldEVycm9yU3RhdGUiLCJjb25maXJtRGVsUGxhY2UiLCJjaGFuZ2VDb25maXJtSGFuZGxlciIsImRlbGV0ZUNhcmQiLCJlZGl0UHJvZmlsZUZvcm0iLCJwYXRjaFVzZXJJbmZvIiwic2V0SW5wdXRWYWx1ZXMiLCJ1cGRhdGVBdmF0YXIiLCJwYXRjaFVzZXJBdmF0YXIiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVB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b0JBRWhCakssRUFBa0IrQyxpQkFBaUIsU0FBUyxXQUMxQ3FILEdBQXFCNEIsa0JBQ3JCSSxHQUFnQkUsZUFBZXBCLEdBQVlKLGVBQzNDc0IsR0FBZ0JqQyxVQUlsQixJQUFNb0MsR0FBZSxJQUFJdkcsRUFBYyxDQUNyQ2xCLGNWeEp3QixxQlV5SnhCbUIsaUJBQWtCLFdBQ2hCc0csR0FBYVYsZ0JBQ2JyQixHQUNHZ0Msa0JBQ0F0RCxNQUFLLFNBQUM1RyxHQUNMNEksR0FBWUUsY0FBYzlJLE1BRTNCNEcsTUFBSyxXQUNKcUQsR0FBYW5ILFdBTmpCLE1BUVMwRSxNQUdieUMsR0FBYXRDLG9CQUViMUosRUFBYXdDLGlCQUFpQixTQUFTLFdBQ3JDdUgsR0FBb0IwQixrQkFDcEJPLEdBQWFwQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIi8vIENMQVNTXG5leHBvcnQgY29uc3Qgc2Nyb2xsT2ZmID0gXCJyb290X3Njcm9sbC1kaXNhYmxlZFwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwT3BlbmVkID0gXCJwb3B1cF9vcGVuZWRcIjtcbmV4cG9ydCBjb25zdCBwbGFjZUxpa2VBY3RpdmUgPSBcInBsYWNlX19saWtlLWJ0bl9hY3RpdmVcIjtcbmV4cG9ydCBjb25zdCBpbnB1dEludmFsaWRDbGFzcyA9IFwicG9wdXBfX2lucHV0X2ludmFsaWRcIjtcbmV4cG9ydCBjb25zdCBhY3RpdmVFcnJvckNsYXNzID0gXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCI7XG5leHBvcnQgY29uc3QgaW5hY3RpdmVCdXR0b25DbGFzcyA9IFwicG9wdXBfX3NhdmUtYnRuX2luYWN0aXZlXCI7XG5leHBvcnQgY29uc3QgZGlzYWJsZURlbGV0ZUJ0biA9IFwicGxhY2VfX2RlbC1idG5fZGlzYWJsZVwiXG5cbi8vIEVMRU1FTlRTXG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGpvYlByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2pvYlwiKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9uYW1lLXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9qb2ItcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idG5cIik7XG5leHBvcnQgY29uc3QgdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbnB1dF9hdmF0YXItbGlua1wiXG4pO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZFBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0TmFtZVBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucG9wdXBfX2lucHV0X25hbWUtcGxhY2VcIlxuKTtcbmV4cG9ydCBjb25zdCBpbnB1dExpbmtQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbnB1dF9saW5rLXBsYWNlXCJcbik7XG5leHBvcnQgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRcIik7XG5leHBvcnQgY29uc3QgcG9wdXBab29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC16b29tXCIpO1xuZXhwb3J0IGNvbnN0IGVsZW1lbnRGb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfZWRpdC1wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGVsZW1lbnRGb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9lZGl0LWF2YXRhclwiKTtcblxuLy8gU0VMRUNUT1JTXG5leHBvcnQgY29uc3Qgcm9vdCA9IFwiLnJvb3RcIjtcbmV4cG9ydCBjb25zdCBwbGFjZXNMaXN0ID0gXCIucGxhY2VzXCI7XG5leHBvcnQgY29uc3QgcGxhY2VUZW1wbGF0ZSA9IFwiLnBsYWNlLXRlbXBsYXRlXCI7XG5leHBvcnQgY29uc3QgcGxhY2VMaWtlQnRuID0gXCIucGxhY2VfX2xpa2UtYnRuXCI7XG5leHBvcnQgY29uc3QgcGxhY2VEZWxCdG4gPSBcIi5wbGFjZV9fZGVsLWJ0blwiO1xuZXhwb3J0IGNvbnN0IHBsYWNlSW1hZ2UgPSBcIi5wbGFjZV9faW1hZ2VcIjtcbmV4cG9ydCBjb25zdCBwbGFjZVRpdGxlID0gXCIucGxhY2VfX3RpdGxlXCI7XG5leHBvcnQgY29uc3QgcGxhY2VMaWtlQ291bnQgPSBcIi5wbGFjZV9fbGlrZS1jb3VudFwiO1xuXG5leHBvcnQgY29uc3QgcG9wdXBFbGVtZW50ID0gXCIucG9wdXBcIjtcbmV4cG9ydCBjb25zdCBmb3JtU2VsZWN0b3IgPSBcIi5wb3B1cF9fY29udGFpbmVyXCI7XG5leHBvcnQgY29uc3QgcG9wdXBDbG9zZUJ0biA9IFwiLnBvcHVwX19jbG9zZS1idG5cIjtcbmV4cG9ydCBjb25zdCBwb3B1cFpvb21JbWcgPSBcIi5wb3B1cC16b29tXCI7XG5leHBvcnQgY29uc3Qgem9vbUltYWdlID0gXCIucG9wdXAtem9vbV9faW1hZ2VcIjtcbmV4cG9ydCBjb25zdCB6b29tQ2FwdGlvbiA9IFwiLnBvcHVwLXpvb21fX2NhcHRpb25cIjtcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZSA9IFwiLnBvcHVwX2VkaXQtcHJvZmlsZVwiO1xuZXhwb3J0IGNvbnN0IGZvcm1BdmF0YXIgPSBcIi5wb3B1cF9lZGl0LWF2YXRhclwiO1xuZXhwb3J0IGNvbnN0IGZvcm1QbGFjZSA9IFwiLnBvcHVwX2FkZC1wbGFjZVwiO1xuZXhwb3J0IGNvbnN0IGZvcm1Db25maXJtRGVsUGxhY2UgPSBcIi5wb3B1cF9kZWwtcGxhY2VcIjtcblxuZXhwb3J0IGNvbnN0IGlucHV0U2VsZWN0b3IgPSBcIi5wb3B1cF9faW5wdXRcIjtcbmV4cG9ydCBjb25zdCBzdWJtaXRCdXR0b24gPSBcIi5wb3B1cF9fc2F2ZS1idG5cIjtcbiIsImltcG9ydCB7XG4gIG5hbWVQcm9maWxlLFxuICBwbGFjZUxpa2VCdG4sXG4gIHBsYWNlTGlrZUNvdW50LFxuICBwbGFjZURlbEJ0bixcbiAgcGxhY2VJbWFnZSxcbiAgcGxhY2VUaXRsZSxcbiAgcGxhY2VMaWtlQWN0aXZlLFxuICBkaXNhYmxlRGVsZXRlQnRuLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBjYXJkLFxuICAgIHNlbGVjdG9yLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXG4gICAgaGFuZGxlRGVsQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmQubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZC5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gY2FyZC5saWtlcztcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkLl9pZDtcbiAgICB0aGlzLl91c2VySWQgPSBuYW1lUHJvZmlsZS5pZDtcbiAgICB0aGlzLl9vd25lcklkID0gY2FyZC5vd25lci5faWQ7XG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbENsaWNrID0gaGFuZGxlRGVsQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgcGxhY2VFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBwbGFjZUVsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlTGlrZWQoKSB7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICB9XG5cbiAgdG9nZ2xlTGlrZShyZXMpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUocGxhY2VMaWtlQWN0aXZlKTtcbiAgICB0aGlzLl9saWtlQ291bnQudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2xpa2VzID0gcmVzLmxpa2VzO1xuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLl9saWtlcy5maW5kKCh7IF9pZCB9KSA9PiBfaWQgPT09IG5hbWVQcm9maWxlLmlkKTtcbiAgfVxuXG4gIF9oYW5kbGVab29tSW1hZ2UobmFtZSwgbGluaykge1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldGUoZWxlbWVudCwgY2FyZCkge1xuICAgIHRoaXMuX2hhbmRsZURlbENsaWNrKGVsZW1lbnQsIGNhcmQpO1xuICB9XG5cbiAgX3NldEV2ZW50c0xpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlZCgpKTtcbiAgICB0aGlzLl9kZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcy5fZWxlbWVudCwgdGhpcy5fY2FyZElkKVxuICAgICk7XG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVab29tSW1hZ2UodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcbiAgICApO1xuICB9XG5cbiAgZ2VuZXJhdGVQbGFjZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHBsYWNlTGlrZUJ0bik7XG4gICAgdGhpcy5fZGVsQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHBsYWNlRGVsQnRuKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihwbGFjZUltYWdlKTtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKHBsYWNlVGl0bGUpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9saWtlQ291bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IocGxhY2VMaWtlQ291bnQpO1xuICAgIHRoaXMuX2xpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIC8vIFNFVCBERUxFVEUgQlROIFRPIE1ZIENBUkRcbiAgICBpZiAodGhpcy5fb3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICB0aGlzLl9kZWxCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShkaXNhYmxlRGVsZXRlQnRuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGVsQnV0dG9uLmNsYXNzTGlzdC5hZGQoZGlzYWJsZURlbGV0ZUJ0bik7XG4gICAgfVxuXG4gICAgLy8gU0VUIEFDVElWRSBUTyBNWSBMSUtFU1xuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKHBsYWNlTGlrZUFjdGl2ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShwbGFjZUxpa2VBY3RpdmUpO1xuICAgIH1cblxuICAgIHRoaXMuX3NldEV2ZW50c0xpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJQbGFjZXMoY2FyZHNBcnIpIHtcbiAgICBjYXJkc0Fyci5mb3JFYWNoKChjYXJkKSA9PiB0aGlzLl9yZW5kZXJlcihjYXJkKSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgbmV3SXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IHVzZXJBdmF0YXIgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lVXNlciwgYWJvdXRVc2VyIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZVVzZXI7XG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dFVzZXI7XG4gICAgdGhpcy5fYXZhdGFyID0gdXNlckF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgIH07IFxuICB9XG5cbiAgc2V0VXNlckluZm8ocmVzKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHJlcy5uYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gcmVzLmFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcihyZXMpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gcmVzLmF2YXRhcjtcbiAgICB0aGlzLl9hdmF0YXIuYWx0ID0gcmVzLm5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIHJvb3QsXG4gIHNjcm9sbE9mZixcbiAgcG9wdXBFbGVtZW50LFxuICBwb3B1cE9wZW5lZCxcbiAgcG9wdXBDbG9zZUJ0bixcbiAgc3VibWl0QnV0dG9uLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihyb290KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwID0gdGhpcy5fcG9wdXBGb3JtLmNsb3Nlc3QocG9wdXBFbGVtZW50KTtcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b24pO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb3ZlcmxheUVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuaGFuZGxlRXNjQ2xvc2UgPSB0aGlzLmhhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQocG9wdXBPcGVuZWQpO1xuICAgIHRoaXMuX3Jvb3QuY2xhc3NMaXN0LmFkZChzY3JvbGxPZmYpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShwb3B1cE9wZW5lZCk7XG4gICAgdGhpcy5fcm9vdC5jbGFzc0xpc3QucmVtb3ZlKHNjcm9sbE9mZik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBoYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZShlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IocG9wdXBDbG9zZUJ0bilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XG5cbiAgICB0aGlzLl9vdmVybGF5RWxlbWVudCA9IHRoaXMuX3BvcHVwO1xuICAgIHRoaXMuX292ZXJsYXlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UuYmluZCh0aGlzKVxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xuaW1wb3J0IHsgem9vbUltYWdlLCB6b29tQ2FwdGlvbiB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl96b29tUG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl96b29tSW1hZ2UgPSB0aGlzLl96b29tUG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioem9vbUltYWdlKTtcbiAgICB0aGlzLl96b29tQ2FwdHVyZSA9IHRoaXMuX3pvb21Qb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcih6b29tQ2FwdGlvbik7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl96b29tSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl96b29tSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl96b29tQ2FwdHVyZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwLmpzXCI7XG5pbXBvcnQgeyBpbnB1dFNlbGVjdG9yLCBuYW1lSW5wdXQsIGpvYklucHV0IH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX25hbWVJbnB1dCA9IG5hbWVJbnB1dDtcbiAgICB0aGlzLl9qb2JJbnB1dCA9IGpvYklucHV0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChcbiAgICAgIChpbnB1dCkgPT4gKHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSlcbiAgICApO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgICB0aGlzLl9qb2JJbnB1dC52YWx1ZSA9IGFib3V0O1xuICB9XG5cbiAgY2hhbmdlQnRuVGV4dCgpIHtcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBg0KHQvtGF0YDQsNC90LXQvdC40LUuLi5gO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBg0KHQvtGF0YDQsNC90LjRgtGMYDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgY2hhbmdlQ29uZmlybUhhbmRsZXIoaGFuZGxlcikge1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdFllcyA9IGhhbmRsZXI7XG4gIH1cblxuICBjaGFuZ2VCdG5UZXh0KCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGDQo9C00LDQu9C10L3QuNC1Li4uYDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gYNCU0LBgO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9zdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRZZXModGhpcy5fY2FyZElkKVxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIGlucHV0RWxlbWVudCxcbiAgaW5wdXRTZWxlY3RvcixcbiAgc3VibWl0QnV0dG9uLFxuICBhY3RpdmVFcnJvckNsYXNzLFxuICBpbnB1dEludmFsaWRDbGFzcyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzcyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBzdWJtaXRCdXR0b247XG4gICAgdGhpcy5fYWN0aXZlRXJyb3JDbGFzcyA9IGFjdGl2ZUVycm9yQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRJbnZhbGlkQ2xhc3MgPSBpbnB1dEludmFsaWRDbGFzcztcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEFycmF5ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gIH1cbiAgLy8g0KTRg9C90LrRhtC40Y8g0L7QsdC90YPQu9C10L3QuNGPINC4INGB0LrRgNGL0YLQuNGPIGVycm9yTWVzc2FnZSDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCBwb3B1cFxuICByZXNldEVycm9yU3RhdGUoKSB7XG4gICAgdGhpcy5faW5wdXRBcnJheS5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g0KTRg9C90LrRhtC40Y8g0L/QvtC60LDQt9Cw0YLRjCDQvtGI0LjQsdC60YMg0LLQstC+0LTQsFxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZlRXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRJbnZhbGlkQ2xhc3MpO1xuICB9XG5cbiAgLy8g0KTRg9C90LrRhtC40Y8g0YHQutGA0YvRgtGMINC+0YjQuNCx0LrRgyDQstCy0L7QtNCwXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUVycm9yQ2xhc3MpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0SW52YWxpZENsYXNzKTtcbiAgfVxuXG4gIC8vINCk0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0LjQvdC/0YPRgtC+0LIg0L3QsCDQvtGI0LjQsdC60LhcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICAvLyDQpNGD0L3QutGG0LjRjyDQuNC30LzQtdC90LXQvdC40Y8g0LrQvdC+0L/QutC4INC+0YLQv9GA0LDQstC60LhcbiAgX2luYWN0aXZlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIF9hY3RpdmVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnRuLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYWN0aXZlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgLy8g0KTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDQstCy0L7QtNCwINC90LAg0L7RiNC40LHQutGDXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgaXNJbnB1dE5vdFZhbGlkID0gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICBpZiAoaXNJbnB1dE5vdFZhbGlkKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8g0KTRg9C90LrRhtC40Y8g0YPRgdGC0LDQvdC+0LLQutC4INC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDRgdC+0LHRi9GC0LjRj1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0KTtcbiAgfVxuXG4gIC8vINCk0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YtcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIG5hbWVJbnB1dCxcbiAgam9iSW5wdXQsXG4gIGF2YXRhckxpbmtJbnB1dCxcbiAgaW5wdXROYW1lUGxhY2UsXG4gIGlucHV0TGlua1BsYWNlLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMudXJsID0gY29uZmlnLnVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgfVxuXG4gIGdldFBsYWNlcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcbiAgfVxuXG4gIG5ld1BsYWNlKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBpbnB1dE5hbWVQbGFjZS52YWx1ZSxcbiAgICAgICAgbGluazogaW5wdXRMaW5rUGxhY2UudmFsdWUsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcbiAgfVxuXG4gIHBhdGNoVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lSW5wdXQudmFsdWUsXG4gICAgICAgIGFib3V0OiBqb2JJbnB1dC52YWx1ZSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcbiAgfVxuXG4gIHBhdGNoVXNlckF2YXRhcigpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGF2YXRhckxpbmtJbnB1dC52YWx1ZSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Byb21pc2UpO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcbiAgfVxuXG4gIF9jaGVja1Byb21pc2UocmVzKSB7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQge1xuICBwbGFjZVRlbXBsYXRlLFxuICBwbGFjZXNMaXN0LFxuICBuYW1lUHJvZmlsZSxcbiAgam9iUHJvZmlsZSxcbiAgcG9wdXBab29tSW1nLFxuICBmb3JtUHJvZmlsZSxcbiAgZm9ybUF2YXRhcixcbiAgZm9ybVBsYWNlLFxuICBmb3JtQ29uZmlybURlbFBsYWNlLFxuICBidXR0b25FZGl0UHJvZmlsZSxcbiAgYnV0dG9uQWRkUGxhY2UsXG4gIGJ1dHRvbkF2YXRhcixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9jYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcG9wdXBXaXRoQ29uZmlybS5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9hcGkuanNcIjtcblxuY29uc3QgY2F0Y2hFcnIgPSAocmVzKSA9PiB7XG4gIGFsZXJ0KGDQktGB0ZEg0LjQtNGR0YIg0L3QtSDQv9C+INC/0LvQsNC90YMuICR7cmVzLnN0YXR1c31gKTtcbn07XG5cbi8vIFBPUFVQU1xuY29uc3Qgem9vbVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwWm9vbUltZyk7XG56b29tUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3Qgb3Blblpvb21Qb3B1cCA9IChuYW1lLCBsaW5rKSA9PiB7XG4gIHpvb21Qb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xufTtcblxuLy8gVkFMSURBVElPTlxuY29uc3QgZm9ybVByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtUHJvZmlsZSk7XG5mb3JtUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1BdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQXZhdGFyKTtcbmZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtUGxhY2VWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtUGxhY2UpO1xuZm9ybVBsYWNlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8gQVBJXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgdXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMThcIixcbiAgaGVhZGVyczoge1xuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIGF1dGhvcml6YXRpb246IFwiODdiMjdlODItY2UxMC00MzljLWJiZTYtMmFjY2U4ZjcyY2RjXCIsXG4gIH0sXG59KTtcblxuLy8gTElLRVNcbmNvbnN0IGhhbmRsZUxpa2VDbGljayA9IChjYXJkKSA9PiB7XG4gIGNvbnN0IGNhcmRJZCA9IGNhcmQuX2NhcmRJZDtcbiAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlTGlrZShjYXJkSWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNhcmQudG9nZ2xlTGlrZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjYXRjaEVycik7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAuYWRkTGlrZShjYXJkSWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNhcmQudG9nZ2xlTGlrZShyZXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjYXRjaEVycik7XG4gIH1cbn07XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldFBsYWNlcygpXSlcbiAgLnRoZW4oKFt1c2VyUmVzLCBjYXJkUmVzXSkgPT4ge1xuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHVzZXJSZXMpO1xuICAgIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIodXNlclJlcyk7XG4gICAgbmFtZVByb2ZpbGUuaWQgPSB1c2VyUmVzLl9pZDtcbiAgICBjb25zdCBjYXJkc0FyciA9IGNhcmRSZXMubWFwKCh7IG5hbWUsIGxpbmssIG93bmVyLCBfaWQsIGxpa2VzIH0pID0+ICh7XG4gICAgICBuYW1lLFxuICAgICAgbGluayxcbiAgICAgIG93bmVyLFxuICAgICAgX2lkLFxuICAgICAgbGlrZXMsXG4gICAgfSkpO1xuICAgIHNlcnZlclBsYWNlTGlzdC5yZW5kZXJQbGFjZXMoY2FyZHNBcnIpO1xuICB9KVxuICAuY2F0Y2goY2F0Y2hFcnIpO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmQpID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmQsXG4gICAgcGxhY2VUZW1wbGF0ZSxcbiAgICBvcGVuWm9vbVBvcHVwLFxuICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICBoYW5kbGVEZWxDbGlja1xuICApO1xuICBjb25zdCBwbGFjZUVsZW1lbnQgPSBuZXdDYXJkLmdlbmVyYXRlUGxhY2UoKTtcbiAgc2VydmVyUGxhY2VMaXN0LmFkZEl0ZW0ocGxhY2VFbGVtZW50KTtcbn07XG5cbmNvbnN0IHNlcnZlclBsYWNlTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XG4gICAgICBjcmVhdGVDYXJkKGNhcmQpO1xuICAgIH0sXG4gIH0sXG4gIHBsYWNlc0xpc3Rcbik7XG5cbi8vIEFERCBORVcgUExBQ0VcbmNvbnN0IG5ld1BsYWNlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogZm9ybVBsYWNlLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoKSA9PiB7XG4gICAgbmV3UGxhY2VGb3JtLmNoYW5nZUJ0blRleHQoKTtcbiAgICBhcGlcbiAgICAgIC5uZXdQbGFjZSgpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgICByZXMsXG4gICAgICAgICAgcGxhY2VUZW1wbGF0ZSxcbiAgICAgICAgICBvcGVuWm9vbVBvcHVwLFxuICAgICAgICAgIGhhbmRsZUxpa2VDbGljayxcbiAgICAgICAgICBoYW5kbGVEZWxDbGlja1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBwbGFjZUVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlUGxhY2UoKTtcbiAgICAgICAgc2VydmVyUGxhY2VMaXN0Lm5ld0l0ZW0ocGxhY2VFbGVtZW50KTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIG5ld1BsYWNlRm9ybS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjYXRjaEVycik7XG4gIH0sXG59KTtcbm5ld1BsYWNlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25BZGRQbGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtUGxhY2VWYWxpZGF0b3IucmVzZXRFcnJvclN0YXRlKCk7XG4gIG5ld1BsYWNlRm9ybS5vcGVuKCk7XG59KTtcblxuLy8gREVMRVRFIFBMQUNFXG5jb25zdCBjb25maXJtRGVsUGxhY2UgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShmb3JtQ29uZmlybURlbFBsYWNlKTtcbmNvbmZpcm1EZWxQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBoYW5kbGVEZWxDbGljayA9IChlbGVtZW50LCBjYXJkKSA9PiB7XG4gIGNvbnN0IHBsYWNlRWxlbWVudCA9IGVsZW1lbnQ7XG4gIGNvbnN0IGNhcmRJZCA9IGNhcmQ7XG4gIGNvbmZpcm1EZWxQbGFjZS5vcGVuKCk7XG4gIGNvbmZpcm1EZWxQbGFjZS5jaGFuZ2VDb25maXJtSGFuZGxlcigoKSA9PiB7XG4gICAgY29uZmlybURlbFBsYWNlLmNoYW5nZUJ0blRleHQoKTtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHBsYWNlRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbmZpcm1EZWxQbGFjZS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjYXRjaEVycik7XG4gIH0pO1xufTtcblxuLy8gRURJVCBVU0VSIElORk9cbmNvbnN0IHVzZXJQcm9maWxlID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVVzZXI6IG5hbWVQcm9maWxlLFxuICBhYm91dFVzZXI6IGpvYlByb2ZpbGUsXG59KTtcblxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBmb3JtUHJvZmlsZSxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgIGVkaXRQcm9maWxlRm9ybS5jaGFuZ2VCdG5UZXh0KCk7XG4gICAgYXBpXG4gICAgICAucGF0Y2hVc2VySW5mbygpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBlZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goY2F0Y2hFcnIpO1xuICB9LFxufSk7XG5lZGl0UHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVByb2ZpbGVWYWxpZGF0b3IucmVzZXRFcnJvclN0YXRlKCk7XG4gIGVkaXRQcm9maWxlRm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VyUHJvZmlsZS5nZXRVc2VySW5mbygpKTtcbiAgZWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcbn0pO1xuXG4vLyBVUERBVEUgQVZBVEFSXG5jb25zdCB1cGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IGZvcm1BdmF0YXIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICB1cGRhdGVBdmF0YXIuY2hhbmdlQnRuVGV4dCgpO1xuICAgIGFwaVxuICAgICAgLnBhdGNoVXNlckF2YXRhcigpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIocmVzKTtcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHVwZGF0ZUF2YXRhci5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChjYXRjaEVycik7XG4gIH0sXG59KTtcbnVwZGF0ZUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5idXR0b25BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybUF2YXRhclZhbGlkYXRvci5yZXNldEVycm9yU3RhdGUoKTtcbiAgdXBkYXRlQXZhdGFyLm9wZW4oKTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==